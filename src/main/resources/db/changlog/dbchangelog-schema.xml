<?xml version="1.1" encoding="UTF-8" standalone="no"?>

<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd">

	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-1">
		<createTable tableName="city">
			<column autoIncrement="true" name="id" type="BIGINT">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="latitude" type="DOUBLE"/>
			<column name="longitude" type="DOUBLE"/>
			<column name="name" type="VARCHAR(255)"/>
		</createTable>
	</changeSet>
	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-2">
		<createTable tableName="client">
			<column autoIncrement="true" name="id" type="BIGINT">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="name" type="VARCHAR(255)">
				<constraints unique="true"/>
			</column>
			<column name="city_id" type="BIGINT"/>
		</createTable>
	</changeSet>
	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-3">
		<createTable tableName="order_order_entries">
			<column name="order_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
			<column name="amount" type="INT"/>
			<column name="product_id" type="BIGINT"/>
		</createTable>
	</changeSet>
	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-4">
		<createTable tableName="orders">
			<column autoIncrement="true" name="id" type="BIGINT">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="client_id" type="BIGINT"/>
			<column name="warehouse_id" type="BIGINT"/>
		</createTable>
	</changeSet>
	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-5">
		<createTable tableName="product">
			<column autoIncrement="true" name="id" type="BIGINT">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="name" type="VARCHAR(255)"/>
			<column name="price" type="DECIMAL(19, 2)"/>
		</createTable>
	</changeSet>
	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-6">
		<createTable tableName="stock_level">
			<column autoIncrement="true" name="id" type="BIGINT">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="amount" type="INT"/>
			<column name="product_id" type="BIGINT"/>
			<column name="ware_house_id" type="BIGINT"/>
		</createTable>
	</changeSet>
	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-7">
		<createTable tableName="ware_house">
			<column autoIncrement="true" name="id" type="BIGINT">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="name" type="VARCHAR(255)"/>
			<column name="city_id" type="BIGINT"/>
			<column name="geo_hash" type="VARCHAR(255)"/>
			<column name="geo_hash6" type="VARCHAR(255)"/>
			<column name="geo_hash5" type="VARCHAR(255)"/>
			<column name="geo_hash4" type="VARCHAR(255)"/>
			<column name="geo_hash3" type="VARCHAR(255)"/>
			<column name="geo_hash2" type="VARCHAR(255)"/>
		</createTable>
	</changeSet>
	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-8">
		<createIndex indexName="FK17yo6gry2nuwg2erwhbaxqbs9" tableName="orders">
			<column name="client_id"/>
		</createIndex>
	</changeSet>
	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-9">
		<createIndex indexName="FK1apewl4q6fft22iebdlatvtv4" tableName="order_order_entries">
			<column name="order_id"/>
		</createIndex>
	</changeSet>
	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-10">
		<createIndex indexName="FK9momxhqx13wx2gsbw6n1s2uxs" tableName="ware_house">
			<column name="city_id"/>
		</createIndex>
	</changeSet>
	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-11">
		<createIndex indexName="FKb6vnkgejdwd8v5e6mhr3gyfn2" tableName="stock_level">
			<column name="ware_house_id"/>
		</createIndex>
	</changeSet>
	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-12">
		<createIndex indexName="FKfedq204xtybi8usr8gyeinm6m" tableName="stock_level">
			<column name="product_id"/>
		</createIndex>
	</changeSet>
	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-13">
		<createIndex indexName="FKfmch72wbfb63jbethlgjopol9" tableName="orders">
			<column name="warehouse_id"/>
		</createIndex>
	</changeSet>
	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-14">
		<createIndex indexName="FKkb5fr3nx3qucrbme4wewcmwbf" tableName="client">
			<column name="city_id"/>
		</createIndex>
	</changeSet>
	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-15">
		<createIndex indexName="FKmslgyws5t7f29o33v15sb3hv3" tableName="order_order_entries">
			<column name="product_id"/>
		</createIndex>
	</changeSet>
	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-16">
		<addForeignKeyConstraint baseColumnNames="client_id" baseTableName="orders" constraintName="FK17yo6gry2nuwg2erwhbaxqbs9" deferrable="false" initiallyDeferred="false"
		                         onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="client" validate="true"/>
	</changeSet>
	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-17">
		<addForeignKeyConstraint baseColumnNames="order_id" baseTableName="order_order_entries" constraintName="FK1apewl4q6fft22iebdlatvtv4" deferrable="false"
		                         initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="orders" validate="true"/>
	</changeSet>
	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-18">
		<addForeignKeyConstraint baseColumnNames="city_id" baseTableName="ware_house" constraintName="FK9momxhqx13wx2gsbw6n1s2uxs" deferrable="false" initiallyDeferred="false"
		                         onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="city" validate="true"/>
	</changeSet>
	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-19">
		<addForeignKeyConstraint baseColumnNames="ware_house_id" baseTableName="stock_level" constraintName="FKb6vnkgejdwd8v5e6mhr3gyfn2" deferrable="false"
		                         initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="ware_house" validate="true"/>
	</changeSet>
	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-20">
		<addForeignKeyConstraint baseColumnNames="product_id" baseTableName="stock_level" constraintName="FKfedq204xtybi8usr8gyeinm6m" deferrable="false" initiallyDeferred="false"
		                         onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="product" validate="true"/>
	</changeSet>
	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-21">
		<addForeignKeyConstraint baseColumnNames="warehouse_id" baseTableName="orders" constraintName="FKfmch72wbfb63jbethlgjopol9" deferrable="false" initiallyDeferred="false"
		                         onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="ware_house" validate="true"/>
	</changeSet>
	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-22">
		<addForeignKeyConstraint baseColumnNames="city_id" baseTableName="client" constraintName="FKkb5fr3nx3qucrbme4wewcmwbf" deferrable="false" initiallyDeferred="false"
		                         onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="city" validate="true"/>
	</changeSet>
	<changeSet author="Alexei.Erofeev (generated)" id="1635246603605-23">
		<addForeignKeyConstraint baseColumnNames="product_id" baseTableName="order_order_entries" constraintName="FKmslgyws5t7f29o33v15sb3hv3" deferrable="false"
		                         initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="product" validate="true"/>
	</changeSet>
</databaseChangeLog>
